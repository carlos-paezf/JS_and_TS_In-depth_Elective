"use strict";(self.webpackChunkjs_and_ts_in_depth_elective=self.webpackChunkjs_and_ts_in_depth_elective||[]).push([[1331],{5080:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"introduction_and_modern_fundamentals/arrow_functions_and_this_context","title":"Arrow functions y contexto del this","description":"Las arrow functions (() => ()) son una forma concisa de declarar funciones introducida en ES6. Su uso es com\xfan en programaci\xf3n funcional, callbacks, promesas y m\xe1s. Pero lo m\xe1s relevante no es solo su sintaxis, sino c\xf3mo manejan el contexto de this.","source":"@site/docs/01_introduction_and_modern_fundamentals/05_arrow_functions_and_this_context.md","sourceDirName":"01_introduction_and_modern_fundamentals","slug":"/introduction_and_modern_fundamentals/arrow_functions_and_this_context","permalink":"/JS_and_TS_In-depth_Elective/docs/introduction_and_modern_fundamentals/arrow_functions_and_this_context","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/01_introduction_and_modern_fundamentals/05_arrow_functions_and_this_context.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"let, const, y diferencias con var","permalink":"/JS_and_TS_In-depth_Elective/docs/introduction_and_modern_fundamentals/let_const_and_differences_with_var"},"next":{"title":"Destructuring (arrays y objetos)","permalink":"/JS_and_TS_In-depth_Elective/docs/introduction_and_modern_fundamentals/destructuring_arrays_and_objects"}}');var r=s(4848),o=s(8453);const c={sidebar_position:5},d="Arrow functions y contexto del this",t={},a=[{value:"Arrow Functions vs Funciones Tradicionales",id:"arrow-functions-vs-funciones-tradicionales",level:2},{value:"\xbfPor qu\xe9 las arrow functions no son ideales para m\xe9todos?",id:"por-qu\xe9-las-arrow-functions-no-son-ideales-para-m\xe9todos",level:2},{value:"Cuando usar arrow functions",id:"cuando-usar-arrow-functions",level:2},{value:"C\xf3digo de ejemplo",id:"c\xf3digo-de-ejemplo",level:2},{value:"\xbfQu\xe9 es el contexto this?",id:"qu\xe9-es-el-contexto-this",level:2},{value:"Diagrama de secuencia - this en funciones",id:"diagrama-de-secuencia---this-en-funciones",level:2},{value:"Casos reales y uso profesional",id:"casos-reales-y-uso-profesional",level:2},{value:"Aplicaci\xf3n de buenas pr\xe1cticas",id:"aplicaci\xf3n-de-buenas-pr\xe1cticas",level:2},{value:"Referencias",id:"referencias",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"arrow-functions-y-contexto-del-this",children:"Arrow functions y contexto del this"})}),"\n",(0,r.jsxs)(n.p,{children:["Las ",(0,r.jsx)(n.strong,{children:"arrow functions"})," (",(0,r.jsx)(n.code,{children:"() => ()"}),") son una forma concisa de declarar funciones introducida en ",(0,r.jsx)(n.strong,{children:"ES6"}),". Su uso es com\xfan en programaci\xf3n funcional, callbacks, promesas y m\xe1s. Pero lo m\xe1s relevante no es solo su sintaxis, sino ",(0,r.jsxs)(n.strong,{children:["c\xf3mo manejan el contexto de ",(0,r.jsx)(n.code,{children:"this"}),"."]})]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Las arrow functions ",(0,r.jsxs)(n.strong,{children:["no redefinen el valor de ",(0,r.jsx)(n.code,{children:"this"})]}),". Heredan el contexto del lugar donde fueron definidas (lexical ",(0,r.jsx)(n.code,{children:"this"}),")."]})}),"\n",(0,r.jsx)(n.h2,{id:"arrow-functions-vs-funciones-tradicionales",children:"Arrow Functions vs Funciones Tradicionales"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Caracter\xedstica"}),(0,r.jsx)(n.th,{children:"Funci\xf3n tradicional"}),(0,r.jsx)(n.th,{children:"Arrow Function"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Sintaxis larga"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u274c"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Tiene su propio ",(0,r.jsx)(n.code,{children:"this"})]}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u274c (hereda contexto)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Se puede usar como constructor (",(0,r.jsx)(n.code,{children:"new"}),")"]}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u274c"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Tiene ",(0,r.jsx)(n.code,{children:"arguments"})]}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsxs)(n.td,{children:["\u274c (usa rest ",(0,r.jsx)(n.code,{children:"..."}),", ejm: ",(0,r.jsx)(n.code,{children:"const sum = (...args: number[]) => args.reduce((a, b) => a + b);"}),")"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Ideal para m\xe9todos"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u274c"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Ideal para callbacks"}),(0,r.jsx)(n.td,{children:"Regular"}),(0,r.jsx)(n.td,{children:"\u2705 Excelente"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"por-qu\xe9-las-arrow-functions-no-son-ideales-para-m\xe9todos",children:"\xbfPor qu\xe9 las arrow functions no son ideales para m\xe9todos?"}),"\n",(0,r.jsxs)(n.p,{children:["Cuando defines un ",(0,r.jsx)(n.strong,{children:"m\xe9todo dentro de una clase o prototipo"}),", lo normal es querer que ese m\xe9todo tenga acceso al contexto de la instancia (es decir, ",(0,r.jsx)(n.code,{children:"this"})," apuntando al objeto creado). Si defines ese m\xe9todo como una ",(0,r.jsx)(n.strong,{children:"arrow function en la clase"}),", ese comportamiento puede volverse inmutable e inesperado."]}),"\n",(0,r.jsx)(n.p,{children:"Expliquemos esto con un ejemplo:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"showLineNumbers",children:"class Greeter {\n  name = 'World';\n\n  // highlight-next-line\n  greet = () => {\n    console.log(`Hello, ${this.name}`);\n  };\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Este c\xf3digo ",(0,r.jsx)(n.strong,{children:"funcionar\xe1"}),", pero tiene una implicaci\xf3n importante:"]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["El ",(0,r.jsx)(n.code,{children:"this"})," de ",(0,r.jsx)(n.code,{children:"greet"})," queda ",(0,r.jsx)(n.strong,{children:"ligado de forma permanente al momento de creaci\xf3n"})," del objeto, y ",(0,r.jsx)(n.strong,{children:"no puede cambiarse"})," con ",(0,r.jsx)(n.code,{children:".call()"}),", ",(0,r.jsx)(n.code,{children:".bind()"}),", ni ser reasignado din\xe1micamente."]})}),"\n",(0,r.jsxs)(n.p,{children:["En cambio, las funciones tradicionales permiten control din\xe1mico de ",(0,r.jsx)(n.code,{children:"this"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"showLineNumbers",children:"class Greeter {\n  name = 'World';\n\n  // highlight-next-line\n  greet() {\n    console.log(`Hello, ${this.name}`);\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Este m\xe9todo tradicional:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Puede ser ",(0,r.jsx)(n.strong,{children:"reutilizado"})," o ",(0,r.jsx)(n.strong,{children:"heredado"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Puede usarse con ",(0,r.jsx)(n.code,{children:"super.greet()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Se comporta mejor con herramientas como ",(0,r.jsx)(n.code,{children:"bind"}),", ",(0,r.jsx)(n.code,{children:"call"}),", ",(0,r.jsx)(n.code,{children:"apply"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"En resumen:"}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Usar arrow functions para m\xe9todos ",(0,r.jsx)(n.strong,{children:"limita su reutilizaci\xf3n"}),", especialmente en patrones como herencia, polimorfismo o mezcla de contextos."]})}),"\n",(0,r.jsx)(n.h2,{id:"cuando-usar-arrow-functions",children:"Cuando usar arrow functions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Callbacks (",(0,r.jsx)(n.code,{children:"map"}),", ",(0,r.jsx)(n.code,{children:"filter"}),", ",(0,r.jsx)(n.code,{children:"forEach"}),", ",(0,r.jsx)(n.code,{children:"then"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["M\xe9todos dentro de funciones si se quiere fijar ",(0,r.jsx)(n.code,{children:"this"})]}),"\n",(0,r.jsxs)(n.li,{children:["M\xe9todos an\xf3nimos que no usan ",(0,r.jsx)(n.code,{children:"this"})]}),"\n",(0,r.jsx)(n.li,{children:"Componentes funcionales en React"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"c\xf3digo-de-ejemplo",children:"C\xf3digo de ejemplo"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="src/domain/GreetingService.ts" showLineNumbers',children:"/**\n * Demonstrates the difference in `this` binding between\n * traditional functions and arrow functions.\n */\nexport class GreetingService {\n  private name = 'TypeScript Developer';\n\n  public traditionalFunction() {\n    setTimeout(function () {\n      // highlight-next-line\n      // \u274c `this` is undefined or refers to global\n      console.log(`Hello from traditional: ${this?.name}`);\n    }, 1000);\n  }\n\n  public arrowFunction() {\n      setTimeout(() => {\n      // highlight-next-line\n      // \u2705 `this` refers to GreetingService\n      console.log(`Hello from arrow: ${this.name}`);\n    }, 1000);\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"qu\xe9-es-el-contexto-this",children:"\xbfQu\xe9 es el contexto this?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"this"})," hace referencia al objeto que invoca una funci\xf3n."]}),"\n",(0,r.jsxs)(n.li,{children:["En funciones tradicionales, ",(0,r.jsx)(n.code,{children:"this"})," puede variar seg\xfan el ",(0,r.jsx)(n.strong,{children:"modo de invocaci\xf3n"})," (",(0,r.jsx)(n.code,{children:"objeto.m\xe9todo"}),", ",(0,r.jsx)(n.code,{children:"call"}),", ",(0,r.jsx)(n.code,{children:"bind"}),", etc.)."]}),"\n",(0,r.jsxs)(n.li,{children:["En arrow functions, ",(0,r.jsx)(n.code,{children:"this"})," se toma del ",(0,r.jsx)(n.strong,{children:"entorno l\xe9xico donde fue definida"}),", no del lugar donde se invoca."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"diagrama-de-secuencia---this-en-funciones",children:"Diagrama de secuencia - this en funciones"}),"\n",(0,r.jsx)(n.mermaid,{value:"sequenceDiagram\n    autonumber\n    participant GlobalContext as Global (contexto)\n    participant App as GreetingService (instancia)\n    participant Timer as setTimeout\n    participant FunctionTraditional as Funci\xf3n Tradicional\n    participant FunctionArrow as Arrow Function\n\n    GlobalContext->>App: Se instancia GreetingService\n    App->>Timer: Llama a setTimeout con funci\xf3n tradicional\n    Timer--\x3e>FunctionTraditional: Ejecuta funci\xf3n\n    Note right of FunctionTraditional: `this` apunta al contexto global (\u274c inesperado)\n\n    App->>Timer: Llama a setTimeout con arrow function\n    Timer--\x3e>FunctionArrow: Ejecuta funci\xf3n\n    Note right of FunctionArrow: `this` hereda de App (\u2705 esperado)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Paso 1: Creaci\xf3n del contexto:"})}),"\n",(0,r.jsxs)(n.p,{children:["El entorno global (navegador o Node.js) crea una instancia de la clase ",(0,r.jsx)(n.code,{children:"GreetingService"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"showLineNumbers",children:"const service = new GreetingService();\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Aqu\xed, ",(0,r.jsx)(n.code,{children:"this"})," dentro de ",(0,r.jsx)(n.code,{children:"GreetingService"})," hace referencia correctamente a la instancia creada."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Paso 2: Uso de funci\xf3n tradicional en setTimeout:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"showLineNumbers",children:"setTimeout(function () {\n  console.log(this.name); // \u274c\n}, 1000);\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["En este caso, ",(0,r.jsx)(n.code,{children:"this"})," ",(0,r.jsx)(n.strong,{children:"no hace referencia al objeto"})," ",(0,r.jsx)(n.code,{children:"GreetingService"}),", sino al ",(0,r.jsx)(n.strong,{children:"contexto global"})," (en el navegador, es ",(0,r.jsx)(n.code,{children:"window"}),"; en Node.js, puede ser ",(0,r.jsx)(n.code,{children:"undefined"})," en modo estricto)."]}),"\n",(0,r.jsx)(n.li,{children:"Este error es muy com\xfan y puede romper el acceso a m\xe9todos o propiedades de la clase."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Paso 3: Uso de arrow function en setTimeout:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"showLineNumbers",children:"setTimeout(() => {\n  console.log(this.name); // \u2705\n}, 1000);\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Aqu\xed, ",(0,r.jsx)(n.code,{children:"this"})," ",(0,r.jsx)(n.strong,{children:"no es redefinido"})," por la arrow function."]}),"\n",(0,r.jsxs)(n.li,{children:["En cambio, ",(0,r.jsxs)(n.strong,{children:["hereda el valor de ",(0,r.jsx)(n.code,{children:"this"})," l\xe9xico"]}),", que es el que estaba en el entorno donde fue definida: la instancia de ",(0,r.jsx)(n.code,{children:"GreetingService"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Esto permite acceder correctamente a propiedades y m\xe9todos de la clase."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"En resumen:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Contexto"}),(0,r.jsx)(n.th,{children:"Funci\xf3n Tradicional"}),(0,r.jsx)(n.th,{children:"Arrow Function"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"this"})," en ",(0,r.jsx)(n.code,{children:"setTimeout"})]}),(0,r.jsxs)(n.td,{children:["Apunta al contexto global (",(0,r.jsx)(n.code,{children:"window"}),", ",(0,r.jsx)(n.code,{children:"undefined"}),", etc.)"]}),(0,r.jsx)(n.td,{children:"Hereda de donde fue definida (instancia de clase)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Acceso a ",(0,r.jsx)(n.code,{children:"this.name"})]}),(0,r.jsxs)(n.td,{children:["\u274c Error o ",(0,r.jsx)(n.code,{children:"undefined"})]}),(0,r.jsx)(n.td,{children:"\u2705 Funciona correctamente"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"casos-reales-y-uso-profesional",children:"Casos reales y uso profesional"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Callbacks en eventos DOM"})," o ",(0,r.jsx)(n.strong,{children:"React hooks"}),": las arrow functions evitan errores comunes con el contexto."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Funciones en controladores NestJS"}),": el uso correcto de ",(0,r.jsx)(n.code,{children:"this"})," es crucial para acceder a servicios y dependencias."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Clases en TypeScript"}),": al usar arrow functions como m\xe9todos, se evita tener que hacer ",(0,r.jsx)(n.code,{children:"bind(this)"})," manual."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"aplicaci\xf3n-de-buenas-pr\xe1cticas",children:"Aplicaci\xf3n de buenas pr\xe1cticas"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Principio"}),(0,r.jsx)(n.th,{children:"Aplicaci\xf3n"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Clean Code"})}),(0,r.jsxs)(n.td,{children:["Arrow functions reducen ruido visual y errores por ",(0,r.jsx)(n.code,{children:"this"}),"."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"SOLID"})}),(0,r.jsxs)(n.td,{children:["Usar ",(0,r.jsx)(n.code,{children:"this"})," correctamente evita violaciones al principio de responsabilidad \xfanica (SRP)."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Clean Architecture"})}),(0,r.jsx)(n.td,{children:"Mantener el comportamiento de m\xe9todos predecible y sin acoplamientos ocultos gracias al contexto l\xe9xico."})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"referencias",children:"Referencias"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Flanagan, D. (2020). JavaScript: The Definitive Guide (7th ed.). O'Reilly Media."}),"\n",(0,r.jsxs)(n.li,{children:["Mozilla Developer Network. (s.f.). ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions",children:"Arrow functions."})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.typescriptlang.org/docs/",children:"TypeScript Handbook"})}),"\n",(0,r.jsx)(n.li,{children:"Crockford, D. (2008). JavaScript: The Good Parts. O\u2019Reilly Media."}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.nestjs.com",children:"NestJS Docs"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://google.github.io/styleguide/jsguide.html",children:"JavaScript Style Guide"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>d});var i=s(6540);const r={},o=i.createContext(r);function c(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);