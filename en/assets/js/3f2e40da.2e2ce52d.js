"use strict";(self.webpackChunkjs_and_ts_in_depth_elective=self.webpackChunkjs_and_ts_in_depth_elective||[]).push([[3486],{4238:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"advanced_concepts/callbacks_vs_promises","title":"Callbacks vs Promises","description":"En JavaScript, cuando necesitamos manejar tareas asincr\xf3nicas (peticiones a APIs, timers, operaciones en disco, etc.), tenemos varias herramientas:","source":"@site/docs/03_advanced_concepts/02_callbacks_vs_promises.md","sourceDirName":"03_advanced_concepts","slug":"/advanced_concepts/callbacks_vs_promises","permalink":"/JS_and_TS_In-depth_Elective/en/docs/advanced_concepts/callbacks_vs_promises","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03_advanced_concepts/02_callbacks_vs_promises.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Introducci\xf3n a la asincron\xeda en JS","permalink":"/JS_and_TS_In-depth_Elective/en/docs/advanced_concepts/introduction_to_asynchronicity_in_js"},"next":{"title":"Encadenamiento de Promises","permalink":"/JS_and_TS_In-depth_Elective/en/docs/advanced_concepts/promise_chaining"}}');var i=s(4848),c=s(8453);const r={sidebar_position:2},l="Callbacks vs Promises",o={},t=[{value:"\xbfQu\xe9 es un Callback?",id:"qu\xe9-es-un-callback",level:2},{value:"Flujo asincr\xf3nico con Callbacks",id:"flujo-asincr\xf3nico-con-callbacks",level:2},{value:"Callback Hell",id:"callback-hell",level:2},{value:"\xbfQu\xe9 es una Promise?",id:"qu\xe9-es-una-promise",level:2},{value:"Flujo asincr\xf3nico con Promises",id:"flujo-asincr\xf3nico-con-promises",level:2},{value:"Encadenamiento de Promesas (Promises Chaining)",id:"encadenamiento-de-promesas-promises-chaining",level:2},{value:"Diferencias principales",id:"diferencias-principales",level:2},{value:"Ejemplo t\xe9cnico",id:"ejemplo-t\xe9cnico",level:2},{value:"Aplicaciones",id:"aplicaciones",level:2},{value:"Buenas pr\xe1cticas al usar Promises",id:"buenas-pr\xe1cticas-al-usar-promises",level:2},{value:"Referencias",id:"referencias",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"callbacks-vs-promises",children:"Callbacks vs Promises"})}),"\n",(0,i.jsx)(n.p,{children:"En JavaScript, cuando necesitamos manejar tareas asincr\xf3nicas (peticiones a APIs, timers, operaciones en disco, etc.), tenemos varias herramientas:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Callbacks:"})," el mecanismo m\xe1s antiguo y b\xe1sico."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Promises:"})," una evoluci\xf3n m\xe1s robusta que permite escribir c\xf3digo m\xe1s legible."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"qu\xe9-es-un-callback",children:"\xbfQu\xe9 es un Callback?"}),"\n",(0,i.jsxs)(n.p,{children:["Un ",(0,i.jsx)(n.strong,{children:"callback"})," es una funci\xf3n que se pasa como argumento a otra funci\xf3n y se ejecuta cuando la tarea ha terminado."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:'function getData(callback: (data: string) => void) {\n  setTimeout(() => {\n    callback("Datos cargados");\n  }, 2000);\n}\n\ngetData((data) => {\n  console.log(data); // "Datos cargados"\n});\n'})}),"\n",(0,i.jsx)(n.h2,{id:"flujo-asincr\xf3nico-con-callbacks",children:"Flujo asincr\xf3nico con Callbacks"}),"\n",(0,i.jsx)(n.p,{children:"Escenario base para callbacks."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'console.log("Inicio");\n\nsetTimeout(() => {\n  console.log("Callback ejecutado");\n}, 2000);\n\nconsole.log("Fin");\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-txt",children:"Inicio\nFin\nCallback ejecutado\n"})}),"\n",(0,i.jsx)(n.mermaid,{value:'sequenceDiagram\n    autonumber\n    participant CS as Call Stack\n    participant API as Web/Node APIs\n    participant Q as Task Queue (Callbacks)\n    participant EL as Event Loop\n\n    Note over CS: Inicia ejecuci\xf3n del script\n    CS->>CS: console.log("Inicio")\n    CS->>API: setTimeout(callback, 2000)\n    Note right of API: API registra el temporizador\n\n    CS->>CS: console.log("Fin")\n    Note over CS: Call Stack se vac\xeda\n\n    Note over API: Timer termina despu\xe9s de 2s\n    API->>Q: Encola el callback en la Task Queue\n\n    EL->>Q: Revisa si Call Stack est\xe1 vac\xeda\n    Q--\x3e>CS: Mueve el callback al Call Stack\n    CS->>CS: Ejecuta el callback\n    Note over CS: Se imprime "Callback ejecutado"'}),"\n",(0,i.jsx)(n.h2,{id:"callback-hell",children:"Callback Hell"}),"\n",(0,i.jsx)(n.p,{children:"Cuando se encadenan muchos callbacks, el c\xf3digo se vuelve dif\xedcil de leer y mantener:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:'loginUser("user", (user) => {\n  getUserOrders(user, (orders) => {\n    getOrderDetails(orders[0], (details) => {\n      console.log(details);\n    });\n  });\n});\n'})}),"\n",(0,i.jsx)(n.p,{children:"Este patr\xf3n dificulta:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Mantenimiento:"})," peque\xf1os cambios pueden romper toda la estructura."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Manejo de errores:"})," debes capturar errores en cada nivel."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Lectura:"})," el flujo l\xf3gico est\xe1 invertido y fragmentado."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"qu\xe9-es-una-promise",children:"\xbfQu\xe9 es una Promise?"}),"\n",(0,i.jsxs)(n.p,{children:["Una ",(0,i.jsx)(n.strong,{children:"Promise"})," es un objeto que representa un valor que estar\xe1 disponible ahora, en el futuro o nunca. Puede estar en tres estados:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Pending"})," (pendiente)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fulfilled"})," (resuelta correctamente)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Rejected"})," (rechazada)"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:'const promise = new Promise<string>((resolve, reject) => {\n  setTimeout(() => {\n    resolve("Datos cargados");\n  }, 2000);\n});\n\npromise\n   .then((data) => console.log(data))\n   .catch((err) => console.error(err));\n'})}),"\n",(0,i.jsx)(n.p,{children:"Tambi\xe9n puedes ejecutar tareas en paralelo o en serie con m\xe9todos como:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Promise.all([p1, p2, p3])"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Promise.race([p1, p2])"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Promise.allSettled([p1, p2])"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Promise.any([p1, p2])"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"flujo-asincr\xf3nico-con-promises",children:"Flujo asincr\xf3nico con Promises"}),"\n",(0,i.jsx)(n.p,{children:"Ejemplo de c\xf3digo con Promises para el mismo escenario que antes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'console.log("Inicio");\n\nPromise.resolve().then(() => {\n  console.log("Microtarea de Promise");\n});\n\nconsole.log("Fin");\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-txt",children:"Inicio\nFin\nMicrotarea de Promise\n"})}),"\n",(0,i.jsx)(n.mermaid,{value:'sequenceDiagram\n    autonumber\n    participant CS as Call Stack\n    participant API as Web/Node APIs\n    participant Micro as Microtask Queue (Promises)\n    participant EL as Event Loop\n\n    Note over CS: Inicia ejecuci\xf3n del script\n    CS->>CS: console.log("Inicio")\n    CS->>API: Promise (ej. fetch())\n\n    Note right of API: API realiza la tarea asincr\xf3nica\n\n    CS->>CS: console.log("Fin")\n    Note over CS: Call Stack se vac\xeda\n\n    Note over API: API resuelve/rechaza la Promise\n    API->>Micro: Encola el .then/.catch en la Microtask Queue\n\n    EL->>Micro: Revisa si Call Stack est\xe1 vac\xeda\n    Micro--\x3e>CS: Mueve la microtarea al Call Stack\n    CS->>CS: Ejecuta callback .then/.catch\n    Note over CS: Se procesa la Promesa resuelta'}),"\n",(0,i.jsx)(n.h2,{id:"encadenamiento-de-promesas-promises-chaining",children:"Encadenamiento de Promesas (Promises Chaining)"}),"\n",(0,i.jsxs)(n.p,{children:["Las Promises eliminan el ",(0,i.jsx)(n.strong,{children:"anidamiento profundo"}),", o el Callback Hell."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:'loginUser("user")\n  .then((user) => getUserOrders(user))\n  .then((orders) => getOrderDetails(orders[0]))\n  .then((details) => console.log(details))\n  .catch((err) => console.error(err));\n'})}),"\n",(0,i.jsx)(n.h2,{id:"diferencias-principales",children:"Diferencias principales"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Caracter\xedstica"}),(0,i.jsx)(n.th,{children:"Callbacks"}),(0,i.jsx)(n.th,{children:"Promises"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Legibilidad"}),(0,i.jsx)(n.td,{children:"Puede degradarse con m\xfaltiples niveles (callback hell)"}),(0,i.jsxs)(n.td,{children:["M\xe1s lineal con ",(0,i.jsx)(n.code,{children:".then"})," y ",(0,i.jsx)(n.code,{children:".catch"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Manejo de errores"}),(0,i.jsx)(n.td,{children:"Debes manejar cada error manualmente en cada callback"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"catch"})," captura errores de toda la cadena"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Encadenamiento"}),(0,i.jsx)(n.td,{children:"Dif\xedcil"}),(0,i.jsxs)(n.td,{children:["Nativo con ",(0,i.jsx)(n.code,{children:".then"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Estados intermedios"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Pending, Fulfilled, Rejected"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"a",src:s(9318).A+"",width:"1200",height:"750"})}),"\n",(0,i.jsx)(n.h2,{id:"ejemplo-t\xe9cnico",children:"Ejemplo t\xe9cnico"}),"\n",(0,i.jsx)(n.p,{children:"Supongamos que tenemos que:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Autenticar al usuario."}),"\n",(0,i.jsx)(n.li,{children:"Cargar su perfil."}),"\n",(0,i.jsx)(n.li,{children:"Obtener notificaciones."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Usando solo callbacks llegar\xedamos al Callback Hell:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:'loginUser("user", (user) => {\n  loadProfile(user.id, (profile) => {\n    getNotifications(profile.id, (notifications) => {\n      console.log("Notificaciones:", notifications);\n    });\n  });\n});\n'})}),"\n",(0,i.jsx)(n.p,{children:"Pero, usando Promises, es mucho m\xe1s claro y manejable."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:'loginUser("user")\n  .then(loadProfile)\n  .then(getNotifications)\n  .then((notifications) => console.log("Notificaciones:", notifications))\n  .catch((err) => console.error("Error:", err));\n'})}),"\n",(0,i.jsx)(n.h2,{id:"aplicaciones",children:"Aplicaciones"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Llamadas a APIs REST o GraphQL."}),"\n",(0,i.jsx)(n.li,{children:"Lectura de archivos en Node.js."}),"\n",(0,i.jsx)(n.li,{children:"Flujo de autenticaci\xf3n (login \u2192 cargar datos de usuario \u2192 cargar permisos)."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"buenas-pr\xe1cticas-al-usar-promises",children:"Buenas pr\xe1cticas al usar Promises"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Siempre maneja los errores con ",(0,i.jsx)(n.code,{children:".catch"})," o ",(0,i.jsx)(n.code,{children:"try"}),"/",(0,i.jsx)(n.code,{children:"catch"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Usa ",(0,i.jsx)(n.code,{children:"Promise.all"})," si las tareas pueden ejecutarse en paralelo."]}),"\n",(0,i.jsx)(n.li,{children:"Evita mezclar callbacks y Promises innecesariamente."}),"\n",(0,i.jsx)(n.li,{children:"Mant\xe9n las funciones peque\xf1as y de responsabilidad \xfanica."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"referencias",children:"Referencias"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Flanagan, D. (2020). JavaScript: The Definitive Guide (7th ed.). O\u2019Reilly Media."}),"\n",(0,i.jsxs)(n.li,{children:["Mozilla Developer Network. (s.f.). ",(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop",children:"Concurrency model and Event Loop"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["TypeScript Handbook. (s.f.). ",(0,i.jsx)(n.a,{href:"https://www.typescriptlang.org/docs",children:"Asynchronous Programming"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Node.js Docs. (s.f.). ",(0,i.jsx)(n.a,{href:"https://nodejs.org/api/timers.html",children:"Timers"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Singh, K. (2024). ",(0,i.jsx)(n.a,{href:"https://blog.stackademic.com/6-javascript-callback-pitfalls-i-faced-and-fixed-8932e77fc1c0",children:"6 JavaScript Callback Pitfalls I Faced and Fixed"}),". Medium."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var a=s(6540);const i={},c=a.createContext(i);function r(e){const n=a.useContext(c);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(c.Provider,{value:n},e.children)}},9318:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/02_callback_hell_vs_promises_chain-9ccbc472f9b6d870dfaedfeda13f6191.png"}}]);