"use strict";(self.webpackChunkjs_and_ts_in_depth_elective=self.webpackChunkjs_and_ts_in_depth_elective||[]).push([[2241],{8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>a});var r=s(6540);const o={},c=r.createContext(o);function i(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(c.Provider,{value:n},e.children)}},9333:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"advanced_concepts/closures_definition_and_practical_uses","title":"Closures: definici\xf3n y usos pr\xe1cticos","description":"Un closure es una funci\xf3n que \u201crecuerda\u201d el entorno l\xe9xico en el que fue creada, incluso despu\xe9s de que ese entorno haya dejado de existir.","source":"@site/docs/03_advanced_concepts/08_closures_definition_and_practical_uses.md","sourceDirName":"03_advanced_concepts","slug":"/advanced_concepts/closures_definition_and_practical_uses","permalink":"/JS_and_TS_In-depth_Elective/en/docs/advanced_concepts/closures_definition_and_practical_uses","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03_advanced_concepts/08_closures_definition_and_practical_uses.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"Cancelaci\xf3n de peticiones y AbortController","permalink":"/JS_and_TS_In-depth_Elective/en/docs/advanced_concepts/request_cancellation_and_abortcontroller"},"next":{"title":"Funciones de orden superior","permalink":"/JS_and_TS_In-depth_Elective/en/docs/advanced_concepts/higher-order_functions"}}');var o=s(4848),c=s(8453);const i={sidebar_position:8},a="Closures: definici\xf3n y usos pr\xe1cticos",t={},l=[{value:"Ejemplo t\xe9cnico",id:"ejemplo-t\xe9cnico",level:2},{value:"Usos pr\xe1cticos",id:"usos-pr\xe1cticos",level:2},{value:"Uso de Closure",id:"uso-de-closure",level:2},{value:"Prueba de concepto",id:"prueba-de-concepto",level:2},{value:"\xbfC\xf3mo se conserva el entorno l\xe9xico en un closure?",id:"c\xf3mo-se-conserva-el-entorno-l\xe9xico-en-un-closure",level:2},{value:"Referencias",id:"referencias",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"closures-definici\xf3n-y-usos-pr\xe1cticos",children:"Closures: definici\xf3n y usos pr\xe1cticos"})}),"\n",(0,o.jsxs)(n.p,{children:["Un ",(0,o.jsx)(n.strong,{children:"closure"})," es una funci\xf3n que ",(0,o.jsx)(n.strong,{children:"\u201crecuerda\u201d el entorno l\xe9xico"})," en el que fue creada, incluso despu\xe9s de que ese entorno haya dejado de existir."]}),"\n",(0,o.jsx)(n.p,{children:"En otras palabras, una funci\xf3n interna tiene acceso a:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Sus variables propias"}),"\n",(0,o.jsx)(n.li,{children:"Las variables de su funci\xf3n padre"}),"\n",(0,o.jsx)(n.li,{children:"Las variables globales"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Esto ocurre porque en JavaScript, ",(0,o.jsx)(n.strong,{children:"las funciones son objetos de primera clase"})," y mantienen una referencia viva a su contexto de creaci\xf3n (scope)."]}),"\n",(0,o.jsx)(n.h2,{id:"ejemplo-t\xe9cnico",children:"Ejemplo t\xe9cnico"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:"function outer() {\n  const outerVar = 'visible';\n\n  return function inner() {\n    console.log(outerVar); // 'visible'\n  };\n}\n\nconst closureFn = outer();\nclosureFn(); // a\xfan puede acceder a outerVar\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Aqu\xed, ",(0,o.jsx)(n.code,{children:"inner()"})," es un closure que ",(0,o.jsx)(n.strong,{children:"captura"})," ",(0,o.jsx)(n.code,{children:"outerVar"})," incluso despu\xe9s de que ",(0,o.jsx)(n.code,{children:"outer()"})," termin\xf3 su ejecuci\xf3n."]}),"\n",(0,o.jsx)(n.h2,{id:"usos-pr\xe1cticos",children:"Usos pr\xe1cticos"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Encapsulamiento y privacidad de datos"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:"function counter() {\n  let count = 0;\n  return {\n    increment: () => ++count,\n    decrement: () => --count,\n    getCount: () => count,\n  };\n}\n\nconst c = counter();\nc.increment(); // 1\nc.increment(); // 2\nc.getCount();  // 2\n"})}),"\n",(0,o.jsxs)(n.p,{children:["La variable ",(0,o.jsx)(n.code,{children:"count"})," no es accesible desde afuera, solo mediante m\xe9todos seguros."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Funciones parciales - currying"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:"function greet(greeting: string) {\n  return function (name: string) {\n    return `${greeting}, ${name}!`;\n  };\n}\n\nconst sayHello = greet('Hola');\nsayHello('David'); // 'Hola, David!'\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Se guarda el estado ",(0,o.jsx)(n.code,{children:"greeting"})," en un closure y se reutiliza"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Funciones as\xedncronas en bucles"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:"for (let i = 1; i <= 3; i++) {\n  setTimeout(() => {\n    console.log(`Contador: ${i}`);\n  }, i * 1000);\n}\n// Imprime 1, 2, 3 en segundos consecutivos gracias al cierre sobre `i`\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Gracias a ",(0,o.jsx)(n.code,{children:"let"})," (y closures), cada funci\xf3n conserva su valor correcto de ",(0,o.jsx)(n.code,{children:"i"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Factories de funciones"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:"function makeMultiplier(factor: number) {\n  return function (x: number) {\n    return x * factor;\n  };\n}\n\nconst double = makeMultiplier(2);\nconst triple = makeMultiplier(3);\n\ndouble(5); // 10\ntriple(5); // 15\n"})}),"\n",(0,o.jsx)(n.p,{children:"Crea funciones personalizadas reutilizando l\xf3gica com\xfan."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Creaci\xf3n de m\xf3dulos o patrones tipo m\xf3dulo"}),"\n",(0,o.jsxs)(n.p,{children:["Closures son la base de patrones como el ",(0,o.jsx)(n.strong,{children:"M\xf3dulo Revelado"})," o ",(0,o.jsx)(n.strong,{children:"M\xf3dulo IIFE"}),",para mantener c\xf3digo organizados y seguro:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:"const userModule = (() => {\n  let username = 'David';\n  return {\n    getUsername: () => username,\n    setUsername: (name: string) => (username = name),\n  };\n})();\n\nuserModule.getUsername(); // David\nuserModule.setUsername('Ana');\nuserModule.getUsername(); // Ana\n"})}),"\n",(0,o.jsxs)(n.p,{children:["El estado interno (",(0,o.jsx)(n.code,{children:"username"}),") est\xe1 protegido dentro del closure."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Callbacks con contexto guardado"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:"function onClickLogger(buttonId: string) {\n  return () => console.log(`Click en ${buttonId}`);\n}\n\ndocument.getElementById('btnSave')?.addEventListener('click', onClickLogger('Guardar'));\n"})}),"\n",(0,o.jsx)(n.p,{children:"Closures permiten pasar funciones con un estado recordado como callbacks. En el anterior ejemplo, cada bot\xf3n puede tener su logger personalizado sin compartir estado."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Control de acceso por niveles o validaciones"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:"function secureAccess(userRole: string) {\n  return function (resource: string) {\n    if (userRole === 'admin') {\n      return `Accediendo a ${resource}`;\n    } else {\n      return `Acceso denegado a ${resource}`;\n    }\n  };\n}\n\nconst accessForAdmin = secureAccess('admin');\nconst accessForUser = secureAccess('user');\n\naccessForAdmin('config'); // Accediendo a config\naccessForUser('config');  // Acceso denegado a config\n"})}),"\n",(0,o.jsx)(n.p,{children:"Permiten configurar funciones con condiciones internas persistentes."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"uso-de-closure",children:"Uso de Closure"}),"\n",(0,o.jsx)(n.mermaid,{value:"sequenceDiagram\n    autonumber\n    participant App\n    participant OuterFunction\n    participant ClosureFunction\n\n    App->>OuterFunction: Llama a outer()\n    OuterFunction->>ClosureFunction: Devuelve funci\xf3n inner()\n    App->>ClosureFunction: Llama a inner()\n    ClosureFunction--\x3e>ClosureFunction: Accede a variables de outer\n    ClosureFunction--\x3e>App: Devuelve resultado"}),"\n",(0,o.jsx)(n.h2,{id:"prueba-de-concepto",children:"Prueba de concepto"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:"function createSecret(secret: string) {\n  return function reveal() {\n    return `El secreto es: ${secret}`;\n  };\n}\n\nconst getSecret = createSecret('JS es poderoso');\ngetSecret(); // El secreto es: JS es poderoso\n"})}),"\n",(0,o.jsx)(n.h2,{id:"c\xf3mo-se-conserva-el-entorno-l\xe9xico-en-un-closure",children:"\xbfC\xf3mo se conserva el entorno l\xe9xico en un closure?"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:"function outer() {\n  const mensaje = 'Hola Closure';\n\n  return function inner() {\n    console.log(mensaje); // a\xfan accede a mensaje\n  };\n}\n\nconst fn = outer(); // outer() ya termin\xf3, pero...\nfn(); // 'Hola Closure'\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Aunque ",(0,o.jsx)(n.code,{children:"outer()"})," ya se ejecut\xf3, su ",(0,o.jsx)(n.strong,{children:"contexto (scope)"})," no es recolectado por el ",(0,o.jsx)(n.strong,{children:"garbage collector"}),", porque la funci\xf3n ",(0,o.jsx)(n.strong,{children:"inner()"})," a\xfan lo necesita."]}),"\n",(0,o.jsx)(n.mermaid,{value:'flowchart TD\n    A["Inicio de ejecuci\xf3n de outer()"] --\x3e B["Se crea variable local (ej. mensaje = \'Hola\')"]\n    B --\x3e C["Se define funci\xf3n inner() dentro de outer()"]\n    C --\x3e D["inner() tiene referencia al entorno de outer()"]\n    D --\x3e E["outer() retorna inner()"]\n    E --\x3e F["outer() finaliza ejecuci\xf3n"]\n    F --\x3e G{\xbfinner a\xfan referenciado?}\n    G -- S\xed --\x3e H["El entorno l\xe9xico de outer se mantiene en memoria"]\n    G -- No --\x3e I["El entorno l\xe9xico se elimina (GC)"]\n    H --\x3e J["Llamada a inner() accede a \'mensaje\'"]\n    J --\x3e K["Fin de ejecuci\xf3n"]'}),"\n",(0,o.jsx)(n.h2,{id:"referencias",children:"Referencias"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Flanagan, D. (2020). JavaScript: The Definitive Guide (7th ed.). O\u2019Reilly Media."}),"\n",(0,o.jsxs)(n.li,{children:["Mozilla Developer Network. (s.f.). ",(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures",children:"Closures"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"Crockford, D. (2008). JavaScript: The Good Parts. O\u2019Reilly Media."}),"\n",(0,o.jsxs)(n.li,{children:["Google. (s.f.). ",(0,o.jsx)(n.a,{href:"https://google.github.io/styleguide/jsguide.html",children:"JavaScript Style Guide"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"Zakas, N. C. (2012). Maintainable JavaScript: Writing Readable Code. O\u2019Reilly Media."}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);